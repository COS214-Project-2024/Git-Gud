#include <iostream>
#include "ResourceManager.h"
#include "BuildingFactory.h"
#include "TaxManager.h"
// #include "Subject.h"

void promptPlayer();
void createBuilding();
void viewCityGrid();
void displayRecources();
void collectTax();

using namespace std;

int main() {
    cout << "\e[0;36m_______/\\\\\\\\\\\\\\\\\\_______________________________________________/\\\\\\\\\\\\\\\\\\\\\\\\\\_________________________/\\\\\\\\\\\\_____________/\\\\\\_______________________________________\e[0m" << endl;
    cout << "\e[0;36m______/\\\\\\////////_______________________________________________\\/\\\\\\/////////\\\\\\_____________________\\////\\\\\\____________\\/\\\\\\______________________________________\e[0m" << endl;
    cout << "\e[0;36m_____/\\\\\\/____________/\\\\\\_____/\\\\\\_________/\\\\\\__/\\\\\\____________\\/\\\\\\_______\\/\\\\\\________________/\\\\\\____\\/\\\\\\____________\\/\\\\\\_____________________________________\e[0m" << endl;
    cout << "\e[0;36m_____/\\\\\\_____________\\///___/\\\\\\\\\\\\\\\\\\\\\\___\\//\\\\\\/\\\\\\_____________\\/\\\\\\\\\\\\\\\\\\\\\\\\\\\\___/\\\\\\____/\\\\\\_\\///_____\\/\\\\\\____________\\/\\\\\\______/\\\\\\\\\\\\\\\\___/\\\\/\\\\\\\\\\\\\\_______\e[0m" << endl;
    cout << "\e[0;36m_____\\/\\\\\\______________/\\\\\\_\\////\\\\\\////_____\\//\\\\\\\\\\______________\\/\\\\\\/////////\\\\\\_\\/\\\\\\___\\/\\\\\\__/\\\\\\____\\/\\\\\\_______/\\\\\\\\\\\\\\\\\\____/\\\\\\/////\\\\\\_\\/\\\\\\/////\\\\\\_____\e[0m" << endl;
    cout << "\e[0;36m______\\//\\\\\\____________\\/\\\\\\____\\/\\\\\\__________\\//\\\\\\_______________\\/\\\\\\_______\\/\\\\\\_\\/\\\\\\___\\/\\\\\\_\\/\\\\\\____\\/\\\\\\______/\\\\\\////\\\\\\___/\\\\\\\\\\\\\\\\\\\\\\__\\/\\\\\\___\\///_____\e[0m" << endl;
    cout << "\e[0;36m________\\///\\\\\\__________\\/\\\\\\____\\/\\\\\\_/\\\\___/\\\\_/\\\\\\________________\\/\\\\\\_______\\/\\\\\\_\\/\\\\\\___\\/\\\\\\_\\/\\\\\\____\\/\\\\\\_____\\/\\\\\\__\\/\\\\\\__\\//\\\\///////___\\/\\\\\\___________\e[0m" << endl;
    cout << "\e[0;36m___________\\////\\\\\\\\\\\\\\\\\\_\\/\\\\\\____\\//\\\\\\\\\\___\\//\\\\\\\\/_________________\\/\\\\\\\\\\\\\\\\\\\\\\\\\\/__\\//\\\\\\\\\\\\\\\\\\__\\/\\\\\\__/\\\\\\\\\\\\\\\\\\__\\//\\\\\\\\\\\\\\/\\\\__\\//\\\\\\\\\\\\\\\\\\\\_\\/\\\\\\__________\e[0m" << endl;
    cout << "\e[0;36m_______________\\/////////__\\///______\\/////_____\\////___________________\\/////////////_____\\/////////___\\///__\\/////////____\\///////\\//____\\//////////__\\///__________\e[0m" << endl;
    
    cout << "\e[0;32m                    .|                                                                                                                .|                                 \e[0m" << endl;
    cout << "\e[0;32m                    | |                                                                                                               | |                                \e[0m" << endl;
    cout << "\e[0;32m                    |'|            ._____                                                                                             |'|            ._____              \e[0m" << endl;
    cout << "\e[0;32m            ___    |  |            |.   |' .--- |                                                                             ___    |  |            |.   |' .--- |      \e[0m" << endl;
    cout << "\e[0;32m    _    .-'   '-. |  |     .--'|  ||   | _|    |                                                                     _    .-'   '-. |  |     .--'|  ||   | _|    |      \e[0m" << endl;
    cout << "\e[0;32m    .-'|  _.|  |    ||   '-__  |   |  |    ||      |                                                                  .-'|  _.|  |    ||   '-__  |   |  |    ||      |   \e[0m" << endl;
    cout << "\e[0;32m    |' | |.    |    ||       | |   |  |    ||      |                                                                  |' | |.    |    ||       | |   |  |    ||      |   \e[0m" << endl;
    cout << "\e[0;32m___|  '-'     '    ""       '-'   '-.'    '`      |____                                                           ___|  '-'     '    ""       '-'   '-.'    '`      |____\e[0m" << endl;
    cout << "\e[0;32m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~                          \e[1;92mWelcome\e[0m\e[0;32m                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\e[0m" << endl;
    cout << endl;

    promptPlayer();

    return 0;    
}

void promptPlayer() {
    cout << "\e[0;33m======================================================================================================================================================================\n\e[0m" << endl;
    cout << "•[1] Create Building" << endl;
    cout << "•[2] View City Grid" << endl;
    cout << "•[3] Display Recources" << endl;
    cout << "•[4] Collect Tax" << endl;
    cout << "•[5] Exit" << endl;
    cout << endl;

    int choice;
    cout << "Enter your choice: ";
    cin >> choice;
    cout << endl;

    switch(choice) {
        case 1:
            createBuilding();
            break;
        case 2:
            viewCityGrid();
            break;
        case 3:
            displayRecources();
            break;
        case 4:
            collectTax();
            break;
        case 5:
            terminate();
            break;
        default:
            cout << "Invalid choice!" << endl;
            break;
    }
}

void createBuilding(){
    cout << "Wich type of building do you want to create:" << endl;
    cout << "•[1] Residential Building" << endl;
    cout << "•[2] Commercial Building" << endl;
    cout << "•[3] Industrial Building" << endl;
    cout << "•[4] Landscape" << endl;
    cout << "•[5] Cancel" << endl;

    int choice;
    cout << "Enter your choice: ";
    cin >> choice;

    switch(choice) {
        case 1:
            //ResedentialBuildingFactory resedentialBuildingFactory;
            break;
        case 2:
            
            break;
        case 3:
            
            break;
        case 4:
            
            break;
        case 5:
            promptPlayer();
            break;
        default:
            cout << "Invalid choice!" << endl;
            break;
    }
    
    cout << "Creating Building..." << endl;

}

void viewCityGrid(){
    cout << "Viewing City Grid..." << endl;
    promptPlayer();
}

void displayRecources(){
    ResourceManager* manager = ResourceManager::getInstance();
    cout << "Displaying Recources..." << endl;
    cout << "Wood: " << manager->getWood() << endl;
    cout << "Steel: " << manager->getSteel() << endl;
    cout << "Concrete: " << manager->getConcrete() << endl;
    cout << "Budget: " << manager->getBudget() << endl;
    cout << "Water Supply: " << manager->getWaterSupply() << endl;
    cout << "Energy Supply: " << manager->getEnergySupply() << endl;
    cout << "Waste Capacity: " << manager->getWasteCapacity() << endl;
        
    promptPlayer();
}

void collectTax(){
    TaxManager* taxManager;
    cout << "Collecting Tax..." << endl;
    cout << taxManager->calculateTax() << endl;
    promptPlayer();
}

/*
                       .|
                       | |
                       |'|            ._____
               ___    |  |            |.   |' .---"|
       _    .-'   '-. |  |     .--'|  ||   | _|    |
    .-'|  _.|  |    ||   '-__  |   |  |    ||      |
    |' | |.    |    ||       | |   |  |    ||      |
 ___|  '-'     '    ""       '-'   '-.'    '`      |____
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*/
/*
_______/\\\\\\\\\_______________________________________________/\\\\\\\\\\\\\_________________________/\\\\\\_____________/\\\_______________________________________
______/\\\////////_______________________________________________\/\\\/////////\\\_____________________\////\\\____________\/\\\______________________________________
_____/\\\/____________/\\\_____/\\\_________/\\\__/\\\____________\/\\\_______\/\\\________________/\\\____\/\\\____________\/\\\_____________________________________
_____/\\\_____________\///___/\\\\\\\\\\\___\//\\\/\\\_____________\/\\\\\\\\\\\\\\___/\\\____/\\\_\///_____\/\\\____________\/\\\______/\\\\\\\\___/\\/\\\\\\\_______
_____\/\\\______________/\\\_\////\\\////_____\//\\\\\______________\/\\\/////////\\\_\/\\\___\/\\\__/\\\____\/\\\_______/\\\\\\\\\____/\\\/////\\\_\/\\\/////\\\_____
______\//\\\____________\/\\\____\/\\\__________\//\\\_______________\/\\\_______\/\\\_\/\\\___\/\\\_\/\\\____\/\\\______/\\\////\\\___/\\\\\\\\\\\__\/\\\___\///_____
________\///\\\__________\/\\\____\/\\\_/\\___/\\_/\\\________________\/\\\_______\/\\\_\/\\\___\/\\\_\/\\\____\/\\\_____\/\\\__\/\\\__\//\\///////___\/\\\___________
___________\////\\\\\\\\\_\/\\\____\//\\\\\___\//\\\\/_________________\/\\\\\\\\\\\\\/__\//\\\\\\\\\__\/\\\__/\\\\\\\\\__\//\\\\\\\/\\__\//\\\\\\\\\\_\/\\\__________
_______________\/////////__\///______\/////_____\////___________________\/////////////_____\/////////___\///__\/////////____\///////\//____\//////////__\///__________
*/